// GENERATED CODE. DO NOT EDIT

package models

import "fmt"

{{ range .ServerInterface.Routes -}}
type {{ .Name }}{{ .Method }}Request struct {
	{{- range .Parameters }}
	{{ .Name | ToTitle }} {{ .Type }}
	{{- end }}
	{{ if ne .RequestBody.Type "" -}}
	Body {{ .RequestBody.Type }}
	{{- end }}
}

func (model {{ .Name }}{{ .Method }}Request)IsValid() error {
	{{- range .Parameters }}
	// {{ .Name }} {{ .Type }}
	// Min: {{ .MinLength }}
	// Max: {{ .MaxLength }}
	{{- end }}
	{{ if ne .RequestBody.Type "" -}}
	err := model.Body.IsValid()
	if err != nil {
		return err
	}
	{{- end }}
	return nil
}

{{ $interfaceName := (printf "%s%s%s" .Name .Method "Response") }}
type {{ $interfaceName }} interface {
	Implements{{ $interfaceName }}()
	GetStatus() int
}

{{ range $code, $response := .Responses }}
type {{ $response.Name }} struct {
	{{- range $name, $schema := $response.Properties }}
	{{ $name | Sanitize | ToTitle }} {{ $schema.Type }} `json:"{{ $name }}"`
	{{- end }}
}

func ({{ $response.Name }}) Implements{{ $interfaceName }}(){}

func ({{ $response.Name }}) GetStatus() int {
	return {{ $code }}
}
{{ end }}
{{ end -}}

{{ range .ServerInterface.Models }}
type {{ .Name }} struct {
	{{- range $name, $schema := .Properties }}
	{{ $name | Sanitize | ToTitle }} {{ $schema.Type }} `json:"{{ $name }}"`
	{{- end }}
}

func (model {{ .Name }})IsValid() error {
	{{- range $name, $schema := .Properties }}
	{{- if eq $schema.Type "string" }}

	{{- if ne $schema.MinLength 0 }}
	if len(model.{{ $name | Sanitize | ToTitle }}) < {{ $schema.MinLength }} {
		return fmt.Errorf("model.{{ $name | Sanitize | ToTitle }} too short")
	}
	{{- end }}

	{{- if ne $schema.MaxLength 0 }}
	if len(model.{{ $name | Sanitize | ToTitle }}) > {{ $schema.MaxLength }} {
		return fmt.Errorf("model.{{ $name | Sanitize | ToTitle }} too long")
	}
	{{- end }}

	{{- end }}
	{{- end }}

	return nil
}
{{ end }}